core.workflow(
    name = "gitlab",
    origin = git.origin(
        url = "ssh://gitlab.com/wpieterse/monorepository",
        ref = "main",
    ),
    destination = git.destination(
        url = "ssh://gitlab.com/wpieterse/games/idtech-4",
        push = "main",
        fetch = "main",
    ),
    mode = "SQUASH",
    authoring = authoring.pass_thru("Wynand Pieterse <wpieterse2825@gmail.com>"),
    origin_files = glob(
        [
            "games/idtech_4/**",
        ],
        exclude = [
            "games/idtech_4/copy.bara.sky",
            "games/idtech_4/sync.sh",
        ],
    ),
    transformations = [
        metadata.squash_notes(),
        core.move("games/idtech_4", ""),
    ],
)

core.workflow(
    name = "github",
    origin = git.origin(
        url = "ssh://gitlab.com/wpieterse/monorepository",
        ref = "main",
    ),
    destination = git.destination(
        url = "ssh://github.com/wpieterse/game-idtech-4",
        push = "main",
        fetch = "main",
    ),
    mode = "SQUASH",
    authoring = authoring.pass_thru("Wynand Pieterse <wpieterse2825@gmail.com>"),
    origin_files = glob(
        [
            "games/idtech_4/**",
        ],
        exclude = [
            "games/idtech_4/copy.bara.sky",
            "games/idtech_4/sync.sh",
        ],
    ),
    transformations = [
        metadata.squash_notes(),
        core.move("games/idtech_4", ""),
    ],
)
